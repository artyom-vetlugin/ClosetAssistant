import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

const resources = {
  en: {
    common: {
      appName: 'Closet Assistant',
      signOut: 'Sign Out',
      loading: 'Loading...',
      deleting: 'Deleting…',
      delete: 'Delete',
      save: 'Save',
      cancel: 'Cancel',
      fillAllFields: 'Please fill in all fields',
      tryAgain: 'Try again',
      details: 'Details',
      types: {
        top: 'Top',
        bottom: 'Bottom',
        dress: 'Dress',
        outerwear: 'Outerwear',
        shoes: 'Shoes',
        accessory: 'Accessory',
      },
      styles: {
        casual: 'Casual',
        formal: 'Formal',
        sport: 'Sport',
        streetwear: 'Streetwear',
        outdoor: 'Outdoor',
        beach: 'Beach',
        home: 'Home',
      },
      colors: {
        black: 'Black',
        white: 'White',
        gray: 'Gray',
        blue: 'Blue',
        red: 'Red',
        green: 'Green',
        yellow: 'Yellow',
        pink: 'Pink',
        purple: 'Purple',
        brown: 'Brown',
        orange: 'Orange',
        navy: 'Navy',
        beige: 'Beige',
      },
      seasons: {
        spring: 'Spring',
        summer: 'Summer',
        fall: 'Fall',
        winter: 'Winter',
      },
    },
    itemDetail: {
      title: 'Item Details',
      editItem: 'Edit Item',
      deleteItem: 'Delete Item',
      removeBg: 'Remove background',
      removingBg: 'Removing background...',
      saveChanges: 'Save Changes',
      stylesLabel: 'Styles',
      deleteConfirmTitle: 'Delete Item?',
      deleteConfirmText:
        'This action cannot be undone. The item will be permanently removed from your wardrobe.',
      failedUpdate: 'Failed to update item',
      failedDelete: 'Failed to delete item',
      failedRemoveBg: 'Failed to remove background',
    },
    outfitCard: {
      excellent: 'Excellent',
      good: 'Good',
      okay: 'Okay',
      poor: 'Poor',
      colors: 'Colors:',
      whyWorks: 'Why this works:',
      viewDetails: 'View Details',
      saveLook: 'Save Look',
      saveOutfit: 'Save Outfit',
      nameOptional: 'Outfit Name (optional)',
      placeholder: 'Leave empty for auto-generated name',
      saving: 'Saving...',
      showDetails: 'Show score details',
      hideDetails: 'Hide score details',
      breakdown: {
        colorHarmony: 'Color harmony',
        seasonMatch: 'Season match',
        styleMatch: 'Style match',
        variety: 'Variety',
        freshness: 'Freshness',
        accessory: 'Accessory',
        penalties: 'Penalties',
        total: 'Total',
      },
      reasons: {
        shoesNeutral: '{{shoes}} shoes work with any color combination',
        pairBalanced: '{{top}} and {{bottom}} create a balanced look',
        complementary: '{{top}} and {{bottom}} are complementary colors',
        neutralShoesBalance: 'Neutral shoes balance the bold top and bottom',
        allNeutrals: 'All neutral colors create a classic, timeless look',
        mayClash: '{{top}} and {{bottom}} may clash',
        notIdealSeason: 'Some items not ideal for {{season}}',
        perfectSeason: 'Perfect for {{season}} weather',
        suitableSeason: 'Suitable for {{season}}',
        goodVariety: 'Good variety in clothing types',
        freshPicks: 'Fresh picks not worn recently',
        repeatItems: 'Some items repeated from recent outfits',
        accessoryComplement: '{{color}} accessory complements the outfit',
      },
    },
    camera: {
      cancel: 'Cancel',
      takePhoto: 'Take Photo',
      stopCamera: 'Stop Camera',
      tryAgain: 'Try Again',
      starting: 'Starting camera...',
      accessFailed: 'Camera access failed: {{message}}',
    },
    nav: {
      home: 'Home',
      wardrobe: 'Wardrobe',
      add: 'Add',
      suggest: 'Suggest',
      saved: 'Saved',
      history: 'History',
    },
    dashboard: {
      welcomeTitle: 'Welcome to Closet Assistant',
      welcomeSubtitle: 'Make faster outfit decisions with what you already own',
      addItemTitle: 'Add Item',
      addItemText: 'Take a photo and tag your clothing',
      wardrobeTitle: 'My Wardrobe',
      wardrobeText: 'Browse and filter your clothes',
      suggestTitle: 'Get Suggestions',
      suggestText: 'AI-powered outfit recommendations',
      historyTitle: 'Wear History',
      historyText: "Track what you've worn",
      statsTitle: 'Your Wardrobe Stats',
      loadingStats: 'Loading stats...',
      items: 'Items',
      categories: 'Categories',
      colors: 'Colors',
      byCategory: 'By Category',
      byColor: 'By Color',
    },
    wardrobe: {
      title: 'My Wardrobe',
      addItem: 'Add Item',
      filtersTitle: 'Filters',
      type: 'Type',
      color: 'Color',
      season: 'Season',
      allTypes: 'All types',
      allColors: 'All colors',
      allSeasons: 'All seasons',
      errorLoad: 'Failed to load wardrobe items',
      loading: 'Loading your wardrobe...',
      emptyFilteredTitle: 'No items match your filters',
      emptyFilteredText: 'Try adjusting your filters or add more items to your wardrobe',
      emptyTitle: 'No items yet',
      emptyText: 'Start building your digital wardrobe by adding your first item',
      addMore: 'Add More Items',
      addFirst: 'Add Your First Item',
      addedOn: 'Added {{date}}',
      updatedSuccess: 'Item updated successfully!',
      deletedSuccess: 'Item deleted successfully!',
    },
    suggestions: {
      title: 'Outfit Suggestions',
      viewSaved: 'View Saved',
      generateTitle: 'Generate New Outfits',
      seasonPreference: 'Season Preference',
      currentSeason: 'Current Season ({{season}})',
      includeAccessories: 'Include accessories',
      generating: 'Generating...',
      generate: 'Generate Suggestions',
      found: 'Found {{count}} great outfits for you!',
      emptyTitle: 'Ready to discover new outfit combinations?',
      emptyText: 'Generate personalized suggestions based on your wardrobe items',
      checkWardrobe: 'Check Your Wardrobe',
      savedSuccess: 'Outfit saved successfully! View it in Saved Outfits.',
      failedSave: 'Failed to save outfit',
      howScoringWorks: 'How scoring works',
      colorWeight: 'Color harmony (40%): neutrals pair with anything; one bold + neutrals scores well; two bolds need balance; neutral shoes help.',
      seasonWeight: 'Season match (35%): items tagged for the chosen season score highest; wrong-season items receive heavy penalties.',
      styleWeight: 'Style match (15%): higher when items share cohesive or compatible styles (e.g., casual + streetwear).',
      varietyWeight: 'Variety (10%): balanced mix of colors and all required pieces.',
      freshnessBonus: 'Freshness: bonus for items not worn in the last 3 logs; repeats get small penalties.',
      accessoryBonus: 'Accessory: small bonus; extra if accessory color complements.',
      bestCombos: 'Best-scoring combos: all neutrals; one bold + two neutrals; two bolds with neutral shoes and good pairing; perfect-season matches.',
    },
    saved: {
      title: 'Saved Outfits',
      loading: 'Loading...',
      empty: 'No saved outfits yet.',
      saving: 'Saving…',
      woreToday: 'I wore this today',
      details: 'Details',
      export: 'Export',
      failedExport: 'Failed to export image',
      selectDate: 'Select date',
      logWear: 'Log wear',
      loggedToday: 'Logged for today',
      failedLogWear: 'Failed to log wear',
      loggedFor: 'Logged for {{date}}',
      nameUpdated: 'Name updated',
      failedRename: 'Failed to rename outfit',
      delete: 'Delete',
      deleting: 'Deleting…',
      clickToRename: 'Click to rename',
    },
    history: {
      title: 'Wear History',
      loading: 'Loading...',
      emptyTitle: 'No wear history yet',
      emptyText: 'Start tracking your outfits to see your wear patterns',
      failedLoad: 'Failed to load history',
      failedUpdateDate: 'Failed to update date',
      failedDelete: 'Failed to delete log',
      save: 'Save',
      cancel: 'Cancel',
      delete: 'Delete',
      deleting: 'Deleting…',
    },
    addItem: {
      title: 'Add New Item',
      invalidFile: 'Invalid file',
      mustLogin: 'You must be logged in to add items',
      selectPhoto: 'Please select a photo',
      selectSeason: 'Please select at least one season',
      photoLabel: 'Photo *',
      photoHelp: 'Take a photo or upload from gallery',
      takePhoto: 'Take Photo',
      uploadFromGallery: 'Upload from Gallery',
      typeLabel: 'Type *',
      removeBg: 'Remove background on upload',
      colorLabel: 'Color *',
      detectingColor: 'Detecting color...',
      autodetected: 'Auto-detected: {{color}}',
      seasonsLabel: 'Seasons * (select at least one)',
      saving: 'Saving Item...',
      save: 'Save Item',
      addedSuccess: 'Item added successfully!',
      failedAdd: 'Failed to add item. Please try again.',
    },
    auth: {
      signInTitle: 'Sign in to Closet Assistant',
      or: 'Or',
      orCreate: 'create a new account',
      email: 'Email address',
      emailPlaceholder: 'Enter your email',
      password: 'Password',
      passwordPlaceholder: 'Enter your password',
      forgotPassword: 'Forgot your password?',
      signIn: 'Sign in',
      signingIn: 'Signing in...',
      fillAllFields: 'Please fill in all fields',
      failedSignIn: 'Failed to sign in. Please check your credentials.',
      createTitle: 'Create your account',
      orSignInExisting: 'sign in to your existing account',
      confirmPassword: 'Confirm Password',
      passwordCreatePlaceholder: 'Create a password (min 6 characters)',
      confirmPasswordPlaceholder: 'Confirm your password',
      createAccount: 'Create account',
      creatingAccount: 'Creating account...',
      tosNotice: 'By creating an account, you agree to our terms of service and privacy policy.',
      checkEmailTitle: 'Check your email!',
      checkEmailText: "We've sent you a confirmation link. Please check your email and click the link to activate your account.",
      backToSignIn: 'Back to Sign In',
      passwordsNoMatch: 'Passwords do not match',
      passwordTooShort: 'Password must be at least 6 characters',
      failedCreate: 'Failed to create account. Please try again.',
    },
  },
  ru: {
    common: {
      appName: 'Ассистент Гардероба',
      signOut: 'Выйти',
      loading: 'Загрузка...',
      deleting: 'Удаляем…',
      delete: 'Удалить',
      save: 'Сохранить',
      cancel: 'Отмена',
      fillAllFields: 'Пожалуйста, заполните все поля',
      tryAgain: 'Попробовать снова',
      details: 'Подробнее',
      types: {
        top: 'Верх',
        bottom: 'Низ',
        dress: 'Платье',
        outerwear: 'Верхняя одежда',
        shoes: 'Обувь',
        accessory: 'Аксессуар',
      },
      styles: {
        casual: 'Кэжуал',
        formal: 'Формальный',
        sport: 'Спорт',
        streetwear: 'Уличная',
        outdoor: 'На природе',
        beach: 'Пляж',
        home: 'Дом',
      },
      colors: {
        black: 'Черный',
        white: 'Белый',
        gray: 'Серый',
        blue: 'Синий',
        red: 'Красный',
        green: 'Зеленый',
        yellow: 'Желтый',
        pink: 'Розовый',
        purple: 'Фиолетовый',
        brown: 'Коричневый',
        orange: 'Оранжевый',
        navy: 'Темно-синий',
        beige: 'Бежевый',
      },
      seasons: {
        spring: 'Весна',
        summer: 'Лето',
        fall: 'Осень',
        winter: 'Зима',
      },
    },
    itemDetail: {
      title: 'Информация о вещи',
      editItem: 'Редактировать',
      deleteItem: 'Удалить вещь',
      removeBg: 'Убрать фон',
      removingBg: 'Убираем фон...',
      saveChanges: 'Сохранить изменения',
      stylesLabel: 'Стили',
      deleteConfirmTitle: 'Удалить вещь?',
      deleteConfirmText:
        'Действие необратимо. Вещь будет удалена из вашего гардероба.',
      failedUpdate: 'Не удалось обновить вещь',
      failedDelete: 'Не удалось удалить вещь',
      failedRemoveBg: 'Не удалось убрать фон',
    },
    outfitCard: {
      excellent: 'Отлично',
      good: 'Хорошо',
      okay: 'Нормально',
      poor: 'Слабо',
      colors: 'Цвета:',
      whyWorks: 'Почему это работает:',
      viewDetails: 'Подробнее',
      saveLook: 'Сохранить образ',
      saveOutfit: 'Сохранить образ',
      nameOptional: 'Название образа (необязательно)',
      placeholder: 'Оставьте пустым для авто-имени',
      saving: 'Сохраняем...',
      showDetails: 'Показать детали оценки',
      hideDetails: 'Скрыть детали оценки',
      breakdown: {
        colorHarmony: 'Цветовая гармония',
        seasonMatch: 'Соответствие сезону',
        styleMatch: 'Соответствие стилю',
        variety: 'Разнообразие',
        freshness: 'Свежесть',
        accessory: 'Аксессуар',
        penalties: 'Штрафы',
        total: 'Итого',
      },
      reasons: {
        shoesNeutral: 'Обувь {{shoes}} сочетается с любой цветовой комбинацией',
        pairBalanced: '{{top}} и {{bottom}} создают сбалансированный образ',
        complementary: '{{top}} и {{bottom}} — комплементарные цвета',
        neutralShoesBalance: 'Нейтральная обувь уравновешивает яркий верх и низ',
        allNeutrals: 'Все нейтральные цвета — классика и вне времени',
        mayClash: '{{top}} и {{bottom}} могут конфликтовать',
        notIdealSeason: 'Некоторые вещи не идеальны для сезона: {{season}}',
        perfectSeason: 'Идеально для сезона: {{season}}',
        suitableSeason: 'Подходит для сезона: {{season}}',
        goodVariety: 'Хорошее разнообразие по типам одежды',
        freshPicks: 'Свежие вещи: давно не носили',
        repeatItems: 'Есть повторы из недавних образов',
        accessoryComplement: 'Аксессуар {{color}} удачно дополняет образ',
      },
    },
    camera: {
      cancel: 'Отмена',
      takePhoto: 'Сделать фото',
      stopCamera: 'Остановить камеру',
      tryAgain: 'Повторить',
      starting: 'Запуск камеры...',
      accessFailed: 'Не удалось получить доступ к камере: {{message}}',
    },
    nav: {
      home: 'Главная',
      wardrobe: 'Гардероб',
      add: 'Добавить',
      suggest: 'Подбор',
      saved: 'Сохраненные',
      history: 'История',
    },
    dashboard: {
      welcomeTitle: 'Добро пожаловать в Ассистент Гардероба',
      welcomeSubtitle: 'Решайте, что надеть, быстрее — из того, что уже есть',
      addItemTitle: 'Добавить вещь',
      addItemText: 'Сделайте фото и отметьте одежду',
      wardrobeTitle: 'Мой гардероб',
      wardrobeText: 'Просматривайте и фильтруйте вещи',
      suggestTitle: 'Получить предложения',
      suggestText: 'Рекомендации образов на основе ИИ',
      historyTitle: 'История',
      historyText: 'Отслеживайте, что вы носили',
      statsTitle: 'Статистика гардероба',
      loadingStats: 'Загрузка статистики...',
      items: 'Вещи',
      categories: 'Категории',
      colors: 'Цвета',
      byCategory: 'По категориям',
      byColor: 'По цветам',
    },
    wardrobe: {
      title: 'Мой гардероб',
      addItem: 'Добавить вещь',
      filtersTitle: 'Фильтры',
      type: 'Тип',
      color: 'Цвет',
      season: 'Сезон',
      allTypes: 'Все типы',
      allColors: 'Все цвета',
      allSeasons: 'Все сезоны',
      errorLoad: 'Не удалось загрузить вещи',
      loading: 'Загружаем ваш гардероб...',
      emptyFilteredTitle: 'Нет вещей по выбранным фильтрам',
      emptyFilteredText: 'Измените фильтры или добавьте больше вещей',
      emptyTitle: 'Пока нет вещей',
      emptyText: 'Начните с добавления первой вещи',
      addMore: 'Добавить ещё вещи',
      addFirst: 'Добавить первую вещь',
      addedOn: 'Добавлено {{date}}',
      updatedSuccess: 'Вещь успешно обновлена!',
      deletedSuccess: 'Вещь удалена!',
    },
    suggestions: {
      title: 'Подбор образов',
      viewSaved: 'Сохраненные',
      generateTitle: 'Сгенерировать новые образы',
      seasonPreference: 'Предпочтительный сезон',
      currentSeason: 'Текущий сезон ({{season}})',
      includeAccessories: 'Включить аксессуары',
      generating: 'Генерируем...',
      generate: 'Сгенерировать',
      found: 'Найдено образов: {{count}}',
      emptyTitle: 'Готовы открыть новые сочетания?',
      emptyText: 'Сгенерируйте персональные рекомендации на основе вашего гардероба',
      checkWardrobe: 'Перейти к гардеробу',
      savedSuccess: 'Образ сохранен! Смотрите в Сохраненных.',
      failedSave: 'Не удалось сохранить образ',
      howScoringWorks: 'Как работает оценка',
      colorWeight: 'Цветовая гармония (40%): нейтральные цвета сочетаются со всем; один яркий + нейтрали — хорошо; два ярких требуют баланса; нейтральная обувь помогает.',
      seasonWeight: 'Соответствие сезону (35%): вещи для выбранного сезона получают максимум; вещи не по сезону — сильный штраф.',
      styleWeight: 'Соответствие стилю (15%): выше, когда вещи одного или совместимых стилей (напр., кэжуал + уличная).',
      varietyWeight: 'Разнообразие (10%): сбалансированный набор цветов и все обязательные элементы.',
      freshnessBonus: 'Свежесть: бонус за вещи, которые не носили в последних 3 записях; повторы — небольшой штраф.',
      accessoryBonus: 'Аксессуар: небольшой бонус; дополнительный, если цвет аксессуара дополняет образ.',
      bestCombos: 'Лучшие комбинации: все нейтральные; один яркий + два нейтральных; два ярких с нейтральной обувью и хорошим сочетанием; идеальное соответствие сезону.',
    },
    saved: {
      title: 'Сохраненные образы',
      loading: 'Загрузка...',
      empty: 'Пока нет сохраненных образов.',
      saving: 'Сохранение…',
      woreToday: 'Я носил это сегодня',
      details: 'Подробнее',
      export: 'Экспорт',
      failedExport: 'Не удалось экспортировать изображение',
      selectDate: 'Выбрать дату',
      logWear: 'Отметить',
      loggedToday: 'Отмечено за сегодня',
      failedLogWear: 'Не удалось отметить',
      loggedFor: 'Отмечено за {{date}}',
      nameUpdated: 'Название обновлено',
      failedRename: 'Не удалось переименовать',
      delete: 'Удалить',
      deleting: 'Удаляем…',
      clickToRename: 'Нажмите, чтобы переименовать',
    },
    history: {
      title: 'История',
      loading: 'Загрузка...',
      emptyTitle: 'История пока пуста',
      emptyText: 'Начните отмечать образы, чтобы видеть статистику',
      failedLoad: 'Не удалось загрузить историю',
      failedUpdateDate: 'Не удалось обновить дату',
      failedDelete: 'Не удалось удалить запись',
      save: 'Сохранить',
      cancel: 'Отмена',
      delete: 'Удалить',
      deleting: 'Удаляем…',
    },
    addItem: {
      title: 'Добавить новую вещь',
      invalidFile: 'Некорректный файл',
      mustLogin: 'Необходимо войти в аккаунт',
      selectPhoto: 'Пожалуйста, выберите фото',
      selectSeason: 'Выберите хотя бы один сезон',
      photoLabel: 'Фото *',
      photoHelp: 'Сделать фото или загрузить из галереи',
      takePhoto: 'Сделать фото',
      uploadFromGallery: 'Загрузить из галереи',
      typeLabel: 'Тип *',
      removeBg: 'Убирать фон при загрузке',
      colorLabel: 'Цвет *',
      detectingColor: 'Определяем цвет...',
      autodetected: 'Авто: {{color}}',
      seasonsLabel: 'Сезоны * (выберите хотя бы один)',
      saving: 'Сохраняем вещь...',
      save: 'Сохранить',
      addedSuccess: 'Вещь успешно добавлена!',
      failedAdd: 'Не удалось добавить вещь. Попробуйте снова.',
    },
    auth: {
      signInTitle: 'Вход в Ассистент Гардероба',
      or: 'Или',
      orCreate: 'создать новый аккаунт',
      email: 'Email',
      emailPlaceholder: 'Введите ваш email',
      password: 'Пароль',
      passwordPlaceholder: 'Введите пароль',
      forgotPassword: 'Забыли пароль?',
      signIn: 'Войти',
      signingIn: 'Входим...',
      fillAllFields: 'Пожалуйста, заполните все поля',
      failedSignIn: 'Не удалось войти. Проверьте данные.',
      createTitle: 'Создайте аккаунт',
      orSignInExisting: 'войдите в существующий аккаунт',
      confirmPassword: 'Подтвердите пароль',
      passwordCreatePlaceholder: 'Придумайте пароль (мин. 6 символов)',
      confirmPasswordPlaceholder: 'Подтвердите пароль',
      createAccount: 'Создать аккаунт',
      creatingAccount: 'Создаем аккаунт...',
      tosNotice: 'Создавая аккаунт, вы соглашаетесь с условиями и политикой конфиденциальности.',
      checkEmailTitle: 'Проверьте почту!',
      checkEmailText: 'Мы отправили ссылку для подтверждения. Перейдите по ссылке, чтобы активировать аккаунт.',
      backToSignIn: 'Назад ко входу',
      passwordsNoMatch: 'Пароли не совпадают',
      passwordTooShort: 'Минимальная длина пароля — 6 символов',
      failedCreate: 'Не удалось создать аккаунт. Попробуйте снова.',
    },
  },
} as const;

i18n
  .use(initReactI18next)
  .use(LanguageDetector)
  .init({
    resources,
    fallbackLng: 'en',
    supportedLngs: ['en', 'ru'],
    defaultNS: 'common',
    interpolation: { escapeValue: false },
    detection: {
      order: ['localStorage', 'navigator', 'htmlTag', 'path', 'subdomain'],
      caches: ['localStorage'],
    },
    react: { useSuspense: false },
  });

// Keep <html lang="..."> in sync with active language
i18n.on('languageChanged', (lng) => {
  if (typeof document !== 'undefined') {
    document.documentElement.lang = lng;
  }
});

export default i18n;


